<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta
			name="viewport"
			content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width"
		/>
		<title>Study Day</title>
		<script src="https://secure.exportkit.com/cdn/js/ek_googlefonts.js?v=6"></script>
		<link rel="StyleSheet" href="skins/main.css" />
		<script type="text/javascript">
			window.addEventListener(
				"load",
				function () {
					setTimeout(loaded, 100);
				},
				false
			);
			function loaded() {
				window.scrollTo(0, 1);
			}
		</script>
	</head>
	<body>
		<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
		<div class="container">
			<div class="today">
				<p class="subtitle">2022. 09. 28 Thur.</p>
			</div>
			<div class="myday">
				<div class="box">
					<p class="subtitle">D-24</p>
					<p class="sub">JLPT</p>
					<p class="sub">2022. 12. 04</p>
				</div>
			</div>
			<p style="clear: both; height: 1px"></p>
			<div class="table">
				<table>
					<thead>
						<tr>
							<th>　</th>
							<th>월</th>
							<th>화</th>
							<th>수</th>
							<th>목</th>
							<th>금</th>
						</tr>
					</thead>
					<tbody id="tmp_table_body"></tbody>
					<script>
						init();
						function init() {
							/*
							let temp = "";
							for (var i = 1; i <= 8; i++) {
								temp += "<tr>";
								temp += `<th> ${i} </th>`;
								for (var j = 0; j < 5; j++) {
									temp += "<td>　</td>";
								}
								temp += "</tr>";
							}
							document.getElementById(
								"tmp_table_body"
							).innerHTML = temp;
							var url =
								"https://open.neis.go.kr/hub/hisTimetable?";
							var key = "KEY=6a5e448c3cdf4c29822e7a31c176f968&";
							var city = "ATPT_OFCDC_SC_CODE=S10&";
							var school = "SD_SCHUL_CODE=9010041&";
							var grade = "&GRADE=1";
							var _class = "&CLASS_NM=1";
							var jsontype = "&type=json";
							for (var i = 2; i <= 2; i++) {
								var url_day = new String(parseInt(today()) + i);
								var t = new Date();
								t.setDate(t.getDate() + i);
								t = getDayOfWeek(t);
								alert(t);
								var call_url = "";
								switch (t) {
									case "토":
										alert("수업없는날");
										break;
									case "일":
										alert("수업없는날");
										break;
									default:
										alert("수업있는날");
										call_url =
											url +
											key +
											city +
											school +
											url_day +
											grade +
											_class +
											jsontype;
										var param = "";

										ajaxCallApi(
											call_url,
											param,
											ApiCallBack
										);
										break;
								}
							}
							*/
							var url =
								`https://open.neis.go.kr/hub/hisTimetable?KEY=6a5e448c3cdf4c29822e7a31c176f968&ATPT_OFCDC_SC_CODE=S10&SD_SCHUL_CODE=9010041&ALL_TI_YMD=` +
								"221012" +
								`&GRADE=1&CLASS_NM=1&type=json`;
							var param = "";
							alert(url);
							ajaxCallApi(url, param, ApiCallBack);
						}
						function ajaxCallApi(url, param, callback) {
							$.ajax({
								url: url,
								async: true,
								type: "post",
								data: param,
								dataType: "json",
								success: callback,
								error: function (req, txt) {
									alert(`에러`);
								},
							});
						}
						function ApiCallBack(json) {
							if (json.hisTimetable != null) {
								alert("성공");
								var rows = document
									.getElementById("tmp_table_body")
									.getElementsByTagName("tr");
								var data = JSON.stringify(
									json.hisTimetable[1]["row"]
								);
								data = JSON.parse(data);
								alert(data.length);
								for (var i = 0; i < data.length; i++) {
									//data[i]["ITRT_CNTNT"];
								}
								alert(JSON.stringify(data));
							}
						}
						function today() {
							var date = new Date();
							var year = date.getFullYear();
							var year = String(year);
							console.log(year);
							var yy = year.substring(2, 4);
							var month = new String(date.getMonth() + 1);
							var day = new String(date.getDate());
							if (month.length == 1) {
								month = "0" + month;
							}
							if (day.length == 1) {
								day = "0" + day;
							}
							return yy + month + day;
						}
						function getDayOfWeek(yymmdd) {
							const week = [
								"일",
								"월",
								"화",
								"수",
								"목",
								"금",
								"토",
							];
							const dayOfWeek = week[new Date(yymmdd).getDay()];
							return dayOfWeek;
						}
					</script>
				</table>
			</div>
			<p style="clear: both"></p>
			<div class="todo">
				<ul class="checklist">
					<li>일본어 단어 외우기</li>
					<li>자바스크립트 공부</li>
					<li>토이 프로젝트 디자인하기</li>
					<li>밥먹기</li>
				</ul>
			</div>
			<p style="clear: both"></p>
			<div class="footer">
				<div class="img_div">
					<img class="imgs" src="/skins/smile_1.png" />
				</div>
				<div class="img_div">
					<img class="imgs" src="/skins/hourglass_1.png" />
				</div>
				<div class="img_div">
					<img class="imgs" src="/skins/school.png" />
				</div>
				<div class="img_div">
					<img class="imgs" src="/skins/todo.png" />
				</div>
			</div>
		</div>
	</body>
</html>
